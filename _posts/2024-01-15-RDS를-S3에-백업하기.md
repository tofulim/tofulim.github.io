---
categories:
  - AWS
tags:
  - aws
  - rds
  - s3
mermaid: true
image: assets/img/0115thumbnail.png
---
> 사용하지 않는 RDS를 삭제하고 어딘가에 백업하고 싶을 때가 있다. 
> 이 때 S3는 그 대안이 될 수 있다.
---

## 1. 스냅샷을 S3로 내보내기

- DB 구성에 스냅샷으로의 자동 백업이 활성화돼있거나 
	![](assets/img/20240116123118.png)
- DB의 작업을 통해 스냅샷을 생성하거나 (삭제할 때 스냅샷 남길거냐고도 물어봄)
	![left|200](assets/img/20240116123204.png)
	
	어떠한 방법이든 스냅샷이 있다면 S3에 백업할 수 있다.
	
![](assets/img/20240116123007.png)
내보내면 다음과 같은 창이 뜬다.
![](assets/img/0115thumbnail.png)
이후 IAM role과 KMS 키를 설정해야한다.
- IAM role의 경우 새 역할을 만든 뒤 AWS IAM 페이지로 이동해 S3 관련 Access를 주면 해결된다.
	- 기존에 S3 관련 권한이 있는 역할을 이용해도 된다.
- KMS의 경우 기존의 키 혹은 새 키를 만들어주면 된다.

---
## 2.  백업 방법 및 이유

s3에 백업한 스냅샷은 새로운 DB를 만들면서 다시 살릴 수 있다.
기존 DB에 s3 스냅샷을 붙일 수는 없다.

S3에 백업해놓는 다는 점에서 이미 기존 서비스의 중지 혹은 중단을 의미하기 때문에 
S3의 여러 다른 저장 class에 맞게 보관하면 될 것이다.

- 앞으로 쓸일이 거의 없고 나중에 필요해도 급하게 필요하지 않는 경우 Glacier를
- 뭔가 조만간 다시 쓸 것 같다면 Infrequent Acces (IA class)
- 절대 안쓸거같지만 법적 의무로 인해 n년간 보관을 해야한다면 Vault

